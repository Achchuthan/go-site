####
#### Use kwalify and this schema to validate the config files.
####
#### Examples:
####    kwalify -f ./metadata/groups.schema.yaml ./metadata/groups.yaml
####    kwalify -f ./metadata/groups.schema.yaml ./metadata/groups.yaml | grep INVALID; test $? -ne 0
####
type: seq
sequence:
  - type: map
    mapping:
      "id":
        type: str
        required: true
        unique: true
        ## Pattern lookahead to prevent trailing slashes.
        pattern: /^(http(s?)\:\/\/\w[\/\.\-\:\w]+)(?<!\/)$/
      "label":
        type: str
        required: true
        unique: true
      "active_from":
        type: str
        required: false
        pattern: /^\d\d\-\d\d\-\d\d\d\d$/
      "active_to":
        type: str
        required: false
      "contacts":
        type: seq
        required: false
        sequence:
          - type: map
            mapping:
              "name":
                type: str
                required: true
              "emaul":
                type: str
                required: false
              "github":
                type: str
                required: false

